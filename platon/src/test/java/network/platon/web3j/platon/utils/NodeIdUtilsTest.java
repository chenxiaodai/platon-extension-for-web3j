package network.platon.web3j.platon.utils;

import org.junit.jupiter.api.Test;
import org.web3j.protocol.core.methods.response.EthBlock;

import static org.junit.jupiter.api.Assertions.*;

class NodeIdUtilsTest {

    @Test
    public void getNodeIdFromBlock() {
        EthBlock.Block block = new EthBlock.Block();
        block.setParentHash("0x6db7ddd74c4039f4c8726fdf83d9f8e12978db5395d6dfdf179be7a439c6f556");
        block.setMiner("0x1000000000000000000000000000000000000003");
        block.setStateRoot("0x7bc2c896168abfed36fb6430253a0253e86ba725c34223ef87bc1ba0613622b6");
        block.setTransactionsRoot("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421");
        block.setReceiptsRoot("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421");
        block.setLogsBloom("0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
        block.setNumber("0x1");
        block.setGasUsed("0x0");
        block.setGasLimit("0xc012af6");
        block.setTimestamp("0x18ab65c2bb7");
        block.setExtraData("0xdb8301040086706c61746f6e89676f312e31382e3130856c696e75780000000055121b2e72853e464796a9eba97801cc33cfa790df95a6430a615d3a070034762f3e2de6683277b2d271d1449ba4918a0b5002910240ca1a162008d2b07b366901");
        block.setNonce("0x03da0c325dfdba5e2aba7b968e939a60dceba9bbf34d34bacefb5014f975aa49f15d308dd06fd283e4ab6c7e1e2872b346a5dd76239ec150084053e4c6d3045c012e9ba39cdbf00fad18eb956da7ea79a5");

        assertEquals(
                "0abaf3219f454f3d07b6cbcf3c10b6b4ccf605202868e2043b6f5db12b745df0604ef01ef4cb523adc6d9e14b83a76dd09f862e3fe77205d8ac83df707969b47",
                NodeIdUtils.getNodeIdFromBlock(block)
        );
    }





}